(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{312:function(a,e,t){"use strict";t.r(e);var v=t(38),i=Object(v.a)({},function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("最近几个月因为公司的业务需求，一直在折腾小程序，从开始的完全不熟悉，到后面被各种坑折磨，是时候写一篇总结了，避免下一次遇到还找不到解决的方案。")]),a._v(" "),t("p",[a._v("其实主要还是关于一些常用的东西进行了一次汇总，作了一个简单的总结而已，大多都跟业务相关，需要注意到的一些关注点。入门教程还是推荐直接参考微信开发的官方文档。")]),a._v(" "),t("p",[a._v("本篇文档仅针对于原生官方API进行微信小程序开发，类似uni-app这类框架的总结后期再继续分享。")]),a._v(" "),t("p",[a._v("目录：")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#%E9%85%8D%E7%BD%AE%E9%A1%B9app-json%E5%92%8Cpage-json"}},[a._v("配置项")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E8%AF%AD%E6%B3%95%E5%8C%BA%E5%88%AB"}},[a._v("语法区别")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E7%BB%84%E4%BB%B6"}},[a._v("组件")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F"}},[a._v("事件系统")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9B%B8%E5%85%B3%E6%9C%BA%E5%88%B6"}},[a._v("小程序相关机制")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E6%B5%81%E7%A8%8B"}},[a._v("小程序运行流程")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"}},[a._v("生命周期函数")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E7%BD%91%E7%BB%9C"}},[a._v("网络")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E8%87%AA%E5%AE%9A%E4%B9%89tabbar"}},[a._v("自定义tabBar")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B"}},[a._v("小程序登录流程")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BC%98%E5%8C%96%E6%93%8D%E4%BD%9C"}},[a._v("小程序优化操作")])])]),a._v(" "),t("h2",{attrs:{id:"配置项app-json和page-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置项app-json和page-json","aria-hidden":"true"}},[a._v("#")]),a._v(" 配置项app.json和page.json")]),a._v(" "),t("h3",{attrs:{id:"app-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#app-json","aria-hidden":"true"}},[a._v("#")]),a._v(" app.json")]),a._v(" "),t("p",[a._v("首先，需要确定的是，app.json 是小程序的全局配置，放在根目录下。")]),a._v(" "),t("p",[a._v("常用的一些字段如下：")]),a._v(" "),t("ul",[t("li",[a._v("pages： 这个用于设置页面的路径，通常访问的页面都放在pages文件夹里面，且必须在这个全局配置文件中设置好路径，否则访问的时候会报错找不到该路径，"),t("strong",[a._v("写在 pages 字段的第一个页面就是这个小程序的首页")]),a._v("（打开小程序看到的第一个页面）")]),a._v(" "),t("li",[a._v("window: 全局样式的配置\n"),t("ul",[t("li",[a._v("导航栏相关：可配置导航栏背景颜色、标题颜色，标题内容，")]),a._v(" "),t("li",[a._v("可以隐藏导航栏（navigationStyle设置为custom，但需要注意，"),t("strong",[a._v("自定义导航栏仍然保留右上角胶囊，且没有返回键，如果想要实现返回功能，需要自己自定义返回的样式和功能")]),a._v("），==该设置对web-view 组件无效==")]),a._v(" "),t("li",[a._v("窗口的背景色， backgroundColor，（即小程序下拉时露出的那一截），另外，仅ios支持的还有backgroundColorTop和backgroundColorBottom， 顶部和底部窗口的背景色")]),a._v(" "),t("li",[a._v("下拉loading的样式，只有黑色和白色（dark / light）")]),a._v(" "),t("li",[t("strong",[a._v("enablePullDownRefresh")]),a._v("，小程序默认页面是没有下拉刷新功能的，如果在app.json中配置该项为true，则所有页面都可以生效。如果只想在单个页面使用下拉刷新，需要在对应的page.json中进行配置")]),a._v(" "),t("li",[a._v("onReachBottomDistance， 上拉加载更多生效时距页面底部距离，默认为50px")]),a._v(" "),t("li",[a._v("屏幕旋转，pageOrientation， 暂时还没有用到过，支持 auto / portrait / landscape，默认为portrait竖屏显示，")])])]),a._v(" "),t("li",[a._v("tabbar： tab栏设置\n"),t("ul",[t("li",[a._v("位置：支持顶部和底部（通常使用底部tab栏）， position（bottom / top）")]),a._v(" "),t("li",[a._v("tab列表 list： 文字以及对应的路径\n"),t("ul",[t("li",[a._v("最少2个，最多5个")]),a._v(" "),t("li",[a._v("pagePath，页面路径（必须是pages中定义的路径）")]),a._v(" "),t("li",[a._v("text， tab上的文字")]),a._v(" "),t("li",[a._v("iconPath， 图片路径，（"),t("strong",[a._v("大小限制为 40kb，建议尺寸为 81px * 81px，不支持网络图片")]),a._v("）")]),a._v(" "),t("li",[a._v("selectedIconPath，选中时的图片路径。限制同上")])])]),a._v(" "),t("li",[a._v("样式相关：color字体颜色，selectedColor选中文字的颜色，backgroundColor是tab栏背景色 ，borderStyle上边框颜色，")]),a._v(" "),t("li",[a._v("custom是否自定义，默认为否， 具体文档参考： "),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("自定义tabBar"),t("OutboundLink")],1)])])]),a._v(" "),t("li",[a._v("networkTimeout（设置网络请求的超时时间）\n"),t("ul",[t("li",[a._v("request")]),a._v(" "),t("li",[a._v("connectSocket")]),a._v(" "),t("li",[a._v("uploadFile")]),a._v(" "),t("li",[a._v("downloadFile")])])]),a._v(" "),t("li",[a._v("debug， 开启调试,会输出Page 的注册，页面路由，数据更新，事件触发等信息，方便查看生命周期的调试")]),a._v(" "),t("li",[a._v("navigateToMiniProgramAppIdList， 跳转到其他小程序时，需要先在app.json中进行声明")]),a._v(" "),t("li",[a._v("usingComponents，如果在app.json中声明该组件，则全局可以使用该自定义组件，不需要再在page的json中声明")]),a._v(" "),t("li",[a._v("permission， 用于授权相关，平时项目中是自己写的页面，调用button的open-type属性唤起授权，其实可以通过插件功能页来实现，比如授权昵称，"),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/plugin/functional-pages/user-info.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("用户信息功能页"),t("OutboundLink")],1)])]),a._v(" "),t("h3",{attrs:{id:"page-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#page-json","aria-hidden":"true"}},[a._v("#")]),a._v(" page.json")]),a._v(" "),t("p",[a._v("页面的样式配置优先级比全局配置中的window高。")]),a._v(" "),t("ul",[t("li",[a._v("可以设置导航栏背景颜色、导航栏标题颜色，导航栏标题，")]),a._v(" "),t("li",[a._v("可以隐藏导航栏，custom 自定义导航栏，只保留右上角胶囊按钮")]),a._v(" "),t("li",[a._v("窗口的背景色\t， 以及ios支持顶部和底部窗口的背景色")]),a._v(" "),t("li",[a._v("backgroundTextStyle，下拉 loading 的样式，仅支持 dark / light")]),a._v(" "),t("li",[a._v("enablePullDownRefresh开启下拉刷新，这个属性只控制当前的page页面可以刷新")]),a._v(" "),t("li",[a._v("onReachBottomDistance，上拉加载更多生效时距页面底部距离，默认为50px")]),a._v(" "),t("li",[a._v("pageOrientation，屏幕旋转设置")]),a._v(" "),t("li",[t("strong",[a._v("disableScroll")]),a._v("，为 true 则页面整体不能上下滚动。只在页面配置中有效，无法在 app.json 中设置")]),a._v(" "),t("li",[a._v("disableSwipeBack， 禁止页面右滑手势返回")]),a._v(" "),t("li",[a._v("usingComponents， 使用自定义组件，如果没有在页面的json中声明，直接使用组件会报错")])]),a._v(" "),t("h3",{attrs:{id:"sitemap-json文件（用于微信索引）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sitemap-json文件（用于微信索引）","aria-hidden":"true"}},[a._v("#")]),a._v(" sitemap.json文件（用于微信索引）")]),a._v(" "),t("p",[a._v("默认规则为都默认被索引：")]),a._v(" "),t("p",[t("code",[a._v('{"action": "allow", "page": "*"}')])]),a._v(" "),t("h2",{attrs:{id:"语法区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#语法区别","aria-hidden":"true"}},[a._v("#")]),a._v(" 语法区别")]),a._v(" "),t("h3",{attrs:{id:"wxml文件跟html的区别："}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wxml文件跟html的区别：","aria-hidden":"true"}},[a._v("#")]),a._v(" wxml文件跟html的区别：")]),a._v(" "),t("ul",[t("li",[a._v("没有div, p, span， 使用view代替div， text代替span")]),a._v(" "),t("li",[a._v("wx:if的使用同vue中的v-if， 但使用上略有区别，不管在标签中还是文本上，都是使用双大括号来表示插值， "),t("code",[a._v('wx:for="'+a._s(a.array)+'"')]),a._v(",")]),a._v(" "),t("li",[a._v("条件渲染有wx:if, wx:elif, wx:else, 使用方式： "),t("code",[a._v('<view wx:if="'+a._s("WEBVIEW"==a.view)+'"> WEBVIEW </view>')])]),a._v(" "),t("li",[t("strong",[a._v("尤其注意，如果是使用boolean类型的值，不要直接在双引号内直接写，也需要写在双大括号里面。如"),t("code",[a._v('<checkbox checked="'+a._s(!1)+'"> </checkbox>')])])]),a._v(" "),t("li",[a._v("列表渲染"),t("code",[a._v('wx:for="'+a._s(a.array)+'"')]),a._v(", 可直接使用item和index，也可以使用"),t("code",[a._v('wx:for-item="idx"')]),a._v(", 和"),t("code",[a._v('wx:for-item="itemName"')]),a._v("重新指定index和item的key值，"),t("strong",[a._v("花括号和引号之间如果有空格，将最终被解析成为字符串")])]),a._v(" "),t("li",[a._v("wxml文件中有一个标签是block， 仅仅是一个包装元素，不会在页面中做任何渲染，只接受控制属性")]),a._v(" "),t("li",[a._v('wx:key的值只能是字符串或者 "*this", '),t("code",[a._v('wx:key="*this"')]),a._v("表示for 循环中的 item 本身， 但是要保证这个item本身是一个唯一的字符串或者数字， 当key绑定的是对象的时候会报错")])]),a._v(" "),t("p",[a._v("问题思考？")]),a._v(" "),t("p",[t("code",[a._v("wx:if")]),a._v(" 和 "),t("code",[a._v("hidden")]),a._v("该怎么合理的判断使用场景？")]),a._v(" "),t("ul",[t("li",[a._v("wx:if 是惰性的，只有为true时才会局部渲染，当 wx:if 的条件值切换时，条件块会在切换时销毁或重新渲染。")]),a._v(" "),t("li",[a._v("而hidden始终会被渲染，只是控制显示与隐藏")]),a._v(" "),t("li",[a._v("所以，如果需要频繁切换的情景下，用 hidden 更好，如果在运行时条件不大可能改变则 wx:if 较好")])]),a._v(" "),t("h2",{attrs:{id:"组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组件","aria-hidden":"true"}},[a._v("#")]),a._v(" 组件")]),a._v(" "),t("h3",{attrs:{id:"基础组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基础组件","aria-hidden":"true"}},[a._v("#")]),a._v(" 基础组件")]),a._v(" "),t("ul",[t("li",[a._v("组件的公共属性：\n"),t("ul",[t("li",[a._v("id, class, style, hidden, data-"),t("em",[a._v(", bind")]),a._v("/catch*")])])]),a._v(" "),t("li",[a._v("视图容器：\n"),t("ul",[t("li",[a._v("可移动： movable-area， movable-view。 其中，movable-view必须在 movable-area 组件中，并且必须是直接子节点")]),a._v(" "),t("li",[a._v("覆盖原生组件：cover-view， cover-image，主要用于覆盖 map、video、canvas、camera、live-player、live-pusher等级别高的原生组件。 "),t("strong",[a._v("注意，在cover-view中只能嵌套cover-view、cover-image和button")])]),a._v(" "),t("li",[a._v("可滚动的视图区域：scroll-view，"),t("strong",[a._v("竖向滚动时，需要给scroll-view一个固定高度")])]),a._v(" "),t("li",[a._v("滑块视图容器： swiper， 其中只能放置swiper-item组件（常用于轮播图）")]),a._v(" "),t("li",[a._v("视图容器view， 如果想使用hover的样式，可以指定按下去的样式类，跟hover相关的属性： hover-class，hover-stop-propagation， hover-start-time， hover-stay-time")])])]),a._v(" "),t("li",[a._v("图标icon，在小程序中可以使用自带的一些icon图标，可以设置type、大小、颜色，详情查看， "),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/component/icon.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("小程序icon组件"),t("OutboundLink")],1)]),a._v(" "),t("li",[a._v("进度条，progress， 普通的进度条包括动画等可以直接使用该组件")]),a._v(" "),t("li",[a._v("富文本，rich-txt, (可以使用该组件渲染html内容，传入html字符串)")]),a._v(" "),t("li",[a._v("文本，text， （如果需要展示多个空格，可以设置space属性）")]),a._v(" "),t("li",[a._v("按钮，button，（可以设置disabled属性进行禁用，防止多次点击触发事件）")]),a._v(" "),t("li",[a._v("单选、多选框：radio、radio-goup、checkbox、checkbox-group")]),a._v(" "),t("li",[a._v("富文本编辑器，editor")]),a._v(" "),t("li",[a._v("表单form，支持switch input checkbox slider radio picker 的提交")]),a._v(" "),t("li",[a._v("输入框input，支持文本、数字、身份证、带小数点的数字键盘等4个类型，password可以显示密码类型，（可以控制键盘右下角的文字，使用confirm-type属性控制，包括“发送”、“搜索”、“下一个”、“前往”、“完成”）注意：input无法设置 font-family，使用的是系统字体")]),a._v(" "),t("li",[a._v("滚动选择器，picker，支持普通、多列、时间、日期、省市选择器，")]),a._v(" "),t("li",[a._v("嵌入页面的滚动选择器， picker-view， picker-view-column")]),a._v(" "),t("li",[a._v("滑动选择器，slider，类似进度条不过可以拖动")]),a._v(" "),t("li",[a._v("开关，switch")]),a._v(" "),t("li",[a._v("多行输入框，textarea")]),a._v(" "),t("li",[a._v("导航，navigator，（类似于a标签，可以使用navigate、redirect、switchTab、reLaunch、navigateBack、exit（退出小程序）等类型）")]),a._v(" "),t("li",[a._v("系统相机，camera，可以用于扫描二维码")]),a._v(" "),t("li",[a._v('视频video，（注意，使用video组件在列表中的时候会引起小程序页面卡顿甚至崩溃，目前项目中的解决方案是使用阿里云上传视频的截帧图片来替换掉video组件，只有点击图片后才会播放视频，查看网上资料说是video的src默认为空，解决了viode自动下载的bug，使用custom-cache="'+a._s(!1)+'"可以解决视频缓存中卡住的问题，不过还没有试过）')]),a._v(" "),t("li",[a._v("公众号关注组件，official-account")]),a._v(" "),t("li",[a._v("承载网页的容器，web-view，（适用于第三方网站内容的嵌入，注意需要在公众平台配置业务域名），避免在链接中带有中文字符，在 iOS中会有打开白屏的问题，建议加一下encodeURIComponent")])]),a._v(" "),t("h3",{attrs:{id:"原生组件的使用限制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#原生组件的使用限制","aria-hidden":"true"}},[a._v("#")]),a._v(" 原生组件的使用限制")]),a._v(" "),t("ul",[t("li",[a._v("原生组件包括：\n"),t("ul",[t("li",[a._v("camera")]),a._v(" "),t("li",[a._v("canvas")]),a._v(" "),t("li",[a._v("input（仅在focus时表现为原生组件）")]),a._v(" "),t("li",[a._v("live-player")]),a._v(" "),t("li",[a._v("live-pusher")]),a._v(" "),t("li",[a._v("map")]),a._v(" "),t("li",[a._v("textarea")]),a._v(" "),t("li",[a._v("video")])])]),a._v(" "),t("li",[a._v("层级： 最高，其他组件无论设置 z-index 为多少，都无法盖在原生组件上")]),a._v(" "),t("li",[a._v("原生组件不能设置动画、fixed布局、不能使用overflow: hidden来裁剪原生组件的显示区域，")]),a._v(" "),t("li",[a._v("事件监听不能使用 bind:eventname 的写法，只支持 bindeventname，不支持 catch 和 capture 的事件绑定方式")])]),a._v(" "),t("h2",{attrs:{id:"事件系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#事件系统","aria-hidden":"true"}},[a._v("#")]),a._v(" 事件系统")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("事件处理函数，参数是event，event的事件内容包括：")]),a._v(" "),t("ul",[t("li",[a._v("type")]),a._v(" "),t("li",[a._v("timeStamp， 事件生成时的时间戳")]),a._v(" "),t("li",[a._v("target，触发事件的"),t("strong",[a._v("源组件")])]),a._v(" "),t("li",[a._v("currentTarget，事件绑定的"),t("strong",[a._v("当前组件")])]),a._v(" "),t("li",[a._v("detail， 自定义事件所携带的数据")]),a._v(" "),t("li",[a._v("touches，一个数组，每个元素为一个 Touch 对象")]),a._v(" "),t("li",[a._v("changedTouches， 有变化的触摸点")])])]),a._v(" "),t("li",[t("p",[a._v("dataset：在target或currentTarget的事件对象中，可以通过dataset获取当前自定义的一些数据，（在JS文件中使用event.currentTarget.dataset时，dataset的属性会自动转换字符串，"),t("strong",[a._v("连字符写法会转换成驼峰写法，而大写字符会自动转成小写字符")]),a._v("）")])]),a._v(" "),t("li",[t("p",[a._v("mark，类似于dataset，（如果存在同名的 mark ，父节点的 mark 会被子节点覆盖）")])]),a._v(" "),t("li",[t("p",[a._v("页面的用户行为：")]),a._v(" "),t("ul",[t("li",[a._v("下拉刷新 onPullDownRefresh")]),a._v(" "),t("li",[a._v("上拉触底 onReachBottom")]),a._v(" "),t("li",[a._v("页面滚动 onPageScroll")]),a._v(" "),t("li",[a._v("用户转发 onShareAppMessage")])])])]),a._v(" "),t("p",[a._v("思考：")]),a._v(" "),t("ol",[t("li",[a._v("小程序中bind事件和catch事件有什么区别？")])]),a._v(" "),t("ul",[t("li",[a._v("bind事件绑定不会阻止冒泡事件向上冒泡，")]),a._v(" "),t("li",[a._v("catch事件绑定可以阻止冒泡事件向上冒泡")])]),a._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[a._v("target和currentTarget有什么不同？")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('<view id="outer" bindtap="handleTap1">\n  outer view\n  <view id="middle" catchtap="handleTap2">\n    middle view\n    <view id="inner" bindtap="handleTap3">\n      inner view\n    </view>\n  </view>\n</view>\n')])])]),t("p",[a._v("如上面这个示例中，点击inner view会触发handleTap3，同时会冒泡到handleTap2。\n对于handleTap2这个组件来说，此时收到事件对象的target就是inner的元素，而currentTarget是middle的部分")]),a._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[a._v("mark 和 dataset 有什么区别？")])]),a._v(" "),t("ul",[t("li",[a._v("mark 会包含从触发事件的节点到根节点上所有的 mark: 属性值；")]),a._v(" "),t("li",[a._v("dataset 仅包含一个节点的 data- 属性值")]),a._v(" "),t("li",[a._v("节点的 mark 不会做连字符和大小写转换")])]),a._v(" "),t("h2",{attrs:{id:"小程序相关机制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小程序相关机制","aria-hidden":"true"}},[a._v("#")]),a._v(" 小程序相关机制")]),a._v(" "),t("ul",[t("li",[a._v("小程序框架的逻辑层并非运行在浏览器中，因此 JavaScript 在 web 中一些能力都无法使用，如 window，document 等")])]),a._v(" "),t("h3",{attrs:{id:"小程序的运行机制：冷启动和热启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小程序的运行机制：冷启动和热启动","aria-hidden":"true"}},[a._v("#")]),a._v(" 小程序的运行机制：冷启动和热启动")]),a._v(" "),t("ul",[t("li",[a._v("冷启动： 首次打开小程序；或小程序销毁后打开。（冷启动会触发app.js中的onLaunch生命周期函数）")]),a._v(" "),t("li",[a._v("热启动： 点击右上角胶囊退出、或者home键离开微信、或者左右滑动返回到微信等动作，都是热启动，并没有销毁小程序，（所以热启动不会触发onLaunch函数，但会触发onShow函数）")])]),a._v(" "),t("h3",{attrs:{id:"启动场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动场景","aria-hidden":"true"}},[a._v("#")]),a._v(" 启动场景")]),a._v(" "),t("ul",[t("li",[a._v("小程序启动场景分为两种：\n"),t("ul",[t("li",[a._v("从发现栏、另一个小程序返回、微信支付、首页下拉小程序栏等为A场景")]),a._v(" "),t("li",[a._v("B场景：打开某个特定页面：如转发分享的卡片链接")])])]),a._v(" "),t("li",[a._v("热启动场景效果：\n"),t("ol",[t("li",[a._v("如果重新进入的场景和退出时的场景都是A场景，则保留原来状态；例如：停留在“个人中心”页面，退出后，下拉首页的小程序列表进入后还是会停留在“个人中心”页面，（触发“个人中心”Page的onShow函数，但是不会触发onLoad函数）")]),a._v(" "),t("li",[a._v("如果当前是A场景，上一个是B场景，则清空原来的页面栈，打开首页（即执行 wx.reLaunch 到首页）如分享出去的卡片是“学员列表”页面，点击卡片停留后退出，再从首页下拉的小程序进入，此时会跳转到首页")]),a._v(" "),t("li",[a._v("不管上一个场景是什么，如果当前是B场景，如点击小程序的分享卡片，此时会清空原来的页面栈，重新进入这个分享页，首先触发app中的onShow函数，然后触发这个分享页的onLoad函数，当然如果app中已经进行了跳转到其它页面，则不会再走这个分享页。")])])]),a._v(" "),t("li",[a._v("冷启动场景效果：\n"),t("ul",[t("li",[a._v("冷启动规则比较简单，如果冷启动时是A场景，则进入小程序首页")]),a._v(" "),t("li",[a._v("如果冷启动时是B场景，则进入对应的特定页面")])])])]),a._v(" "),t("h3",{attrs:{id:"更新机制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更新机制","aria-hidden":"true"}},[a._v("#")]),a._v(" 更新机制")]),a._v(" "),t("ul",[t("li",[a._v("小程序首先会在后台有一个最新版本，一般来说会在24小时内下发新版本信息到用户，静默更新到新版本（此时用户是无感知态）")]),a._v(" "),t("li",[a._v("在后台还没及时更新版本时，每次冷启动都会检测是否有更新版本，如果有，会"),t("strong",[a._v("异步下载")]),a._v("，同时启动当前的旧版本包，所以新版本需要下一次的冷启动才会应用上")]),a._v(" "),t("li",[a._v("如果启动时就想立刻获取最新版本，需要使用 wx.getUpdateManager 的API，用wx.showModal提示用户是否重启应用更新")])]),a._v(" "),t("h3",{attrs:{id:"es6的支持情况："}},[t("a",{staticClass:"header-anchor",attrs:{href:"#es6的支持情况：","aria-hidden":"true"}},[a._v("#")]),a._v(" ES6的支持情况：")]),a._v(" "),t("ul",[t("li",[a._v("微信小程序已经支持了绝大部分的 ES6 API，但部分API仍依赖于系统版本而不支持")]),a._v(" "),t("li",[a._v("String的normalize在ios8，ios9不支持")]),a._v(" "),t("li",[a._v("数组的values在ios8和android不支持")]),a._v(" "),t("li",[a._v("数组的includes在ios8不支持")]),a._v(" "),t("li",[a._v("Proxy不支持ios8、ios9和android")])]),a._v(" "),t("h3",{attrs:{id:"注册小程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注册小程序","aria-hidden":"true"}},[a._v("#")]),a._v(" 注册小程序")]),a._v(" "),t("ul",[t("li",[a._v("app.js中注册小程序，整个小程序只有一个 App 实例，是全部页面共享的。")]),a._v(" "),t("li",[a._v("开发者可以通过 getApp 方法获取到全局唯一的 App 示例，获取App上的数据或调用开发者注册在 App 上的函数")]),a._v(" "),t("li",[a._v("在app.js中可以直接使用this.globalData赋值，但在其他页面需通过getApp()方法获取到实例后才能使用全局变量globalData")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("App({\n  onLaunch: function(options) {},\n  onShow: function(options) {},\n  onHide: function() {},\n  onError: function(msg) {},\n  globalData: 'I am global data'\n})\n")])])]),t("h3",{attrs:{id:"注册页面和自定义组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注册页面和自定义组件","aria-hidden":"true"}},[a._v("#")]),a._v(" 注册页面和自定义组件")]),a._v(" "),t("h4",{attrs:{id:"页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#页面","aria-hidden":"true"}},[a._v("#")]),a._v(" 页面")]),a._v(" "),t("ul",[t("li",[a._v("data 是页面第一次渲染使用的初始数据")]),a._v(" "),t("li",[a._v("onLoad页面加载时触发。一个页面只会调用一次；")]),a._v(" "),t("li",[a._v("onShow在页面显示/切入前台时触发")]),a._v(" "),t("li",[a._v("onPageScroll，监听用户滑动页面事件，（"),t("strong",[a._v("请避免在 onPageScroll 中过于频繁的执行 setData 等引起逻辑层-渲染层通信的操作。尤其是每次传输大量数据，会影响通信耗时")]),a._v("）")]),a._v(" "),t("li",[a._v('onShareAppMessage监听页面内的转发，转发有button 组件 open-type="share"和右上角转发两个方式，（只有Page中定义了onShareAppMessage，右上角才会出现转发功能）')]),a._v(" "),t("li",[a._v("setData：\n"),t("ul",[t("li",[a._v("将数据从逻辑层发送到视图层（异步），同时改变对应的 this.data 的值（同步）（跟react的setState类似，但又不一样）")]),a._v(" "),t("li",[a._v("直接修改 this.data 而不调用 this.setData 是无法改变页面的状态的，还会造成数据不一致")]),a._v(" "),t("li",[a._v("不要把 data 中任何一项的 value 设为 undefined")]),a._v(" "),t("li",[a._v("如果需要视图层更新完毕后再处理事件，可以将事件放在setData的回调函数中")])])])]),a._v(" "),t("p",[a._v("Page构造器：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('Page({\n  data: { text: "This is page data." },\n  onLoad: function(options) { },\n  onReady: function() { },\n  onShow: function() { },\n  onHide: function() { },\n  onUnload: function() { },\n  onPullDownRefresh: function() { },\n  onReachBottom: function() { },\n  onShareAppMessage: function () { },\n  onPageScroll: function() { }\n})\n')])])]),t("h4",{attrs:{id:"自定义组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自定义组件","aria-hidden":"true"}},[a._v("#")]),a._v(" 自定义组件")]),a._v(" "),t("ul",[t("li",[a._v("页面使用自定义组件时需要现在page的json文件中声明usingComponents定义段")]),a._v(" "),t("li",[a._v("组件使用页面的生命周期方法时（即 on 开头的方法），应该写在methods定义段中")]),a._v(" "),t("li",[t("strong",[a._v("behaviors")]),a._v("提取所有页面中公用的代码段，例如，"),t("strong",[a._v("在所有页面被创建和销毁时都要执行同一段代码，就可以把这段代码提取到 behaviors 中")])])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("// page-common-behavior.js\nmodule.exports = Behavior({\n  attached: function() {\n    // 页面创建时执行\n    console.info('Page loaded!')\n  },\n  detached: function() {\n    // 页面销毁时执行\n    console.info('Page unloaded!')\n  }\n})\n\n\n// 页面 A\nvar pageCommonBehavior = require('./page-common-behavior')\nComponent({\n  behaviors: [pageCommonBehavior],\n  data: { /* ... */ },\n  methods: { /* ... */ },\n})\n\n\n// 页面 B\nvar pageCommonBehavior = require('./page-common-behavior')\nComponent({\n  behaviors: [pageCommonBehavior],\n  data: { /* ... */ },\n  methods: { /* ... */ },\n})\n")])])]),t("ul",[t("li",[a._v('在 properties 定义段中，属性名采用驼峰写法（propertyName）；在 wxml 中，指定属性值时则对应使用连字符写法（component-tag-name property-name="attr value"），应用于数据绑定时采用驼峰写法（attr=""）')]),a._v(" "),t("li",[a._v("observers数据监听器，（类似于vue中的watch），具体请参考 "),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/observer.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("数据监听器\n"),t("OutboundLink")],1)]),a._v(" "),t("li",[a._v("created，组件实例刚被创建，（"),t("strong",[a._v("注意此时不能调用 setData")]),a._v("）")]),a._v(" "),t("li",[a._v("definitionFilter，定义段过滤器，用于自定义组件扩展（如扩展自定义组件一个computed计算属性功能）")])]),a._v(" "),t("p",[t("strong",[a._v("注意：")])]),a._v(" "),t("ul",[t("li",[a._v("使用 this.data 可以获取内部数据和属性值；但直接修改它不会将变更应用到界面上，应使用 setData 修改")]),a._v(" "),t("li",[a._v("生命周期函数无法在组件方法中通过 this 访问到")])]),a._v(" "),t("h5",{attrs:{id:"组件间的通信与事件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组件间的通信与事件","aria-hidden":"true"}},[a._v("#")]),a._v(" 组件间的通信与事件")]),a._v(" "),t("ul",[t("li",[a._v("父传子：父组件绑定属性值，子组件通过properties获取，")]),a._v(" "),t("li",[a._v("子组件向父组件传递数据：使用事件传递")]),a._v(" "),t("li",[a._v("父组件访问子组件： 父组件可以通过 this.selectComponent 方法获取子组件实例对象，这样就可以直接访问组件的任意数据和方法")])]),a._v(" "),t("p",[a._v("此处列举第二种自定义事件传递数据的方法：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('// 1. 父组件中监听事件\n<component-tag-name bindmyevent="onMyEvent" />\n\n// 2. 子组件触发事件，触发wxml的onMyEvent事件，触发父组件的方法\n\x3c!--自定义组件中--\x3e\n<button bindtap="onTap">点击这个按钮将触发“myevent”事件</button>\n\n\x3c!--自定义组件js文件中--\x3e\nComponent({\n  properties: {},\n  methods: {\n    onTap: function(){\n      var myEventDetail = {} // detail对象，提供给事件监听函数\n      var myEventOption = {} // 触发事件的选项\n      this.triggerEvent(\'myevent\', myEventDetail, myEventOption)\n    }\n  }\n})\n\n')])])]),t("p",[a._v("具体可参考文档： "),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/events.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("组件间通信与事件\n"),t("OutboundLink")],1)]),a._v(" "),t("p",[t("strong",[a._v("注意：")])]),a._v(" "),t("ul",[t("li",[a._v("组件和引用组件的页面不能使用id选择器（#a）、属性选择器（[a]）和标签名选择器，请改用class选择器")]),a._v(" "),t("li",[a._v("避免使用后代选择器（.a .b）")]),a._v(" "),t("li",[a._v("子元素选择器（.a>.b）只能用于 view 组件与其子节点之间，用于其他组件可能导致非预期的情况")]),a._v(" "),t("li",[a._v("app.wxss 中的样式、组件所在页面的的样式对自定义组件无效（除继承样式外，如 font 、 color会继承自组件外）")])]),a._v(" "),t("h5",{attrs:{id:"组件间关系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组件间关系","aria-hidden":"true"}},[a._v("#")]),a._v(" 组件间关系")]),a._v(" "),t("p",[a._v("场景： 如果一个页面中需要使用到A组件和B组件，而A组件与B组件之间需要通信，此时可以在组件定义时加入relations定义段，如封装的ul和li组件后，之间需要存在关联的父子关系")]),a._v(" "),t("ul",[t("li",[a._v("必须在两个组件定义中都加入relations定义，否则不会生效")]),a._v(" "),t("li",[a._v("type，与目标组件的相对关系，可选的值为 parent 、 child 、 ancestor 、 descendant")]),a._v(" "),t("li",[a._v("另一种情况是关联一类组件（如form与input、checkbox等的关系），需要使用到behavior")])]),a._v(" "),t("p",[a._v("具体使用方式参见 "),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/relations.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("组件间关系"),t("OutboundLink")],1)]),a._v(" "),t("h5",{attrs:{id:"使用setdata应注意的事项："}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用setdata应注意的事项：","aria-hidden":"true"}},[a._v("#")]),a._v(" 使用setData应注意的事项：")]),a._v(" "),t("ul",[t("li",[a._v("不要频繁的去 setData，否则可能导致Android 下用户在滑动时会感觉到卡顿，或者渲染有出现延时")]),a._v(" "),t("li",[a._v("不要每次 setData 都传递大量新数据")]),a._v(" "),t("li",[a._v("不要在后台态页面进行 setData ，")])]),a._v(" "),t("h2",{attrs:{id:"小程序运行流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小程序运行流程","aria-hidden":"true"}},[a._v("#")]),a._v(" 小程序运行流程")]),a._v(" "),t("ol",[t("li",[a._v("微信打开小程序前，会把整个小程序的代码包下载到本地")]),a._v(" "),t("li",[a._v("通过 app.json 的 pages 字段就可以知道你当前小程序的所有页面路径")]),a._v(" "),t("li",[a._v("写在 pages 字段的第一个页面就是这个小程序的首页（打开小程序看到的第一个页面），所以微信会把首页的代码装载进来")]),a._v(" "),t("li",[a._v("小程序启动，触发app.js 定义的 App 实例的 onLaunch回调，启动时也会触发onShow函数，或切前台、从其他页面返回到这个页面，都会触发onShow；onHide监听小程序切后台，（如tab切换，navigateTo，离开微信等）； onPageNotFound页面不存在监听函数")]),a._v(" "),t("li",[a._v("页面的渲染流程开始，微信客户端会先根据 page的json文件配置生成一个界面，")]),a._v(" "),t("li",[a._v("接着装载这个页面的 WXML 结构和 WXSS 样式")]),a._v(" "),t("li",[a._v("最后客户端会装载 page的js文件")]),a._v(" "),t("li",[a._v("Page构造器会生成一个页面，生成页面的时候小程序框架会把 data 数据和 index.wxml 一起渲染出最终的结构，渲染完界面")]),a._v(" "),t("li",[a._v("渲染完界面之后，页面实例就会收到一个 onLoad 的回调")])]),a._v(" "),t("h2",{attrs:{id:"生命周期函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生命周期函数","aria-hidden":"true"}},[a._v("#")]),a._v(" 生命周期函数")]),a._v(" "),t("p",[a._v("小程序里面又三种生命周期：小程序运行的生命周期（在app.js中处理），页面的生命周期（在page的js文件中处理，或者组件的pageLifetimes触发的生命周期函数），组件的生命周期")]),a._v(" "),t("h3",{attrs:{id:"小程序生命周期函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小程序生命周期函数","aria-hidden":"true"}},[a._v("#")]),a._v(" 小程序生命周期函数")]),a._v(" "),t("ul",[t("li",[a._v("onLaunch， 小程序初始化完成时触发，全局只触发一次")]),a._v(" "),t("li",[a._v("onShow，小程序启动，或从后台进入前台显示时触发")]),a._v(" "),t("li",[a._v("onHide，从前台进入后台时触发")]),a._v(" "),t("li",[a._v("onError，小程序发生脚本错误或 API 调用报错时触发")]),a._v(" "),t("li",[a._v("onPageNotFound，小程序要打开的页面不存在时触发")])]),a._v(" "),t("p",[t("strong",[a._v("onLaunch,onShow参数：")])]),a._v(" "),t("ul",[t("li",[a._v("path：\t打开小程序的页面路径")]),a._v(" "),t("li",[a._v("query：\t打开小程序的页面参数query")]),a._v(" "),t("li",[a._v("scene：\t打开小程序的场景值，")]),a._v(" "),t("li",[a._v("shareTicket：\t转发分享参数")]),a._v(" "),t("li",[a._v("referrerInfo：当场景为由从另一个小程序或公众号或App打开时，返回此字段")]),a._v(" "),t("li",[a._v("referrerInfo.appId：\t来源小程序或公众号或App的 appId")]),a._v(" "),t("li",[a._v("referrerInfo.extraData： 来源小程序传过来的数据，scene=1037或1038时支持")])]),a._v(" "),t("h3",{attrs:{id:"页面生命周期函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#页面生命周期函数","aria-hidden":"true"}},[a._v("#")]),a._v(" 页面生命周期函数")]),a._v(" "),t("ul",[t("li",[a._v("onLoad，监听页面加载")]),a._v(" "),t("li",[a._v("onShow, 监听页面显示（如tab切换或者离开微信、或navigateTo）")]),a._v(" "),t("li",[a._v("onReady, 监听页面初次渲染完成(一个页面只会调用一次，代表页面已经准备妥当)")]),a._v(" "),t("li",[a._v("onHide, 监听页面隐藏, (如 wx.navigateTo 或底部 tab 切换到其他页面，小程序切入后台等)")]),a._v(" "),t("li",[a._v("onUnload, 监听页面卸载(如wx.redirectTo或wx.navigateBack到其他页面时)")])]),a._v(" "),t("h3",{attrs:{id:"组件生命周期函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组件生命周期函数","aria-hidden":"true"}},[a._v("#")]),a._v(" 组件生命周期函数")]),a._v(" "),t("ul",[t("li",[a._v("created,在组件实例刚刚被创建时执行，注意此时不能调用 setData")]),a._v(" "),t("li",[a._v("attached,在组件实例进入页面节点树时执行")]),a._v(" "),t("li",[a._v("ready,在组件布局完成后执行")]),a._v(" "),t("li",[a._v("moved, 在组件实例被移动到节点树另一个位置时执行")]),a._v(" "),t("li",[a._v("detached, 在组件实例被从页面节点树移除时执行")])]),a._v(" "),t("p",[a._v("注意：")]),a._v(" "),t("p",[a._v("组件中存在一个组件所在页面的生命周期，定义在pageLifetimes中，其中可用的生命周期包括：")]),a._v(" "),t("ul",[t("li",[a._v("show， 组件所在的页面被展示时执行")]),a._v(" "),t("li",[a._v("hide， 组件所在的页面被隐藏时执行")]),a._v(" "),t("li",[a._v("resize， 组件所在的页面尺寸变化时执行")])]),a._v(" "),t("h2",{attrs:{id:"网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#网络","aria-hidden":"true"}},[a._v("#")]),a._v(" 网络")]),a._v(" "),t("ol",[t("li",[a._v("服务器域名配置，当使用体验版或者开发版报“服务器开小差”了的错误，大部分可能性都是因为没有打开调试，因为在调试模式下，小程序不会去校验域名的合法性。")]),a._v(" "),t("li",[a._v("小程序只可以跟指定的域名与进行网络通信，包括普通 HTTPS 请求（wx.request）、上传文件（wx.uploadFile）、下载文件（wx.downloadFile) 和 WebSocket 通信（wx.connectSocket）")]),a._v(" "),t("li",[a._v("如果接入第三方网页，使用web-view组件，需要配置业务域名")]),a._v(" "),t("li",[a._v("默认超时时间为60s，超时时间可以在 app.json 或 game.json 中通过 networktimeout 配置")]),a._v(" "),t("li",[a._v("并发限制：wx.request、wx.uploadFile、wx.downloadFile 的最大并发限制是 10 个；wx.connectSockt 的最大并发限制是 5 个")]),a._v(" "),t("li",[a._v("返回状态，只要成功接收到服务器返回，"),t("strong",[a._v("无论 statusCode 是多少，都会进入 success 回调")])])]),a._v(" "),t("h2",{attrs:{id:"自定义tabbar"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自定义tabbar","aria-hidden":"true"}},[a._v("#")]),a._v(" 自定义tabBar")]),a._v(" "),t("p",[a._v("用户可以通过配置app.json 中的 tabBar 项指定 custom 字段为true，来自定义tabBar，不过有些使用地方还需要注意：")]),a._v(" "),t("ol",[t("li",[a._v("tabBar 的相关配置项仍然需完整声明，以兼容低版本以及区分哪些是tab页")]),a._v(" "),t("li",[a._v("需要用户自定义一个组件来渲染 tabBar，推荐用 fixed 在底部的 cover-view + cover-image 组件渲染样式，以保证 tabBar 层级相对较高")]),a._v(" "),t("li",[a._v("与 tabBar 样式相关的接口，如 wx.setTabBarItem 等将失效")]),a._v(" "),t("li",[a._v("可以在自定义组件下通过 getTabBar 接口，获取当前页面的自定义 tabBar 组件实例")])]),a._v(" "),t("h2",{attrs:{id:"小程序登录流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小程序登录流程","aria-hidden":"true"}},[a._v("#")]),a._v(" 小程序登录流程")]),a._v(" "),t("p",[a._v("小程序登录需要调用微信的开放接口，整体流程如下：")]),a._v(" "),t("ol",[t("li",[a._v("小程序通过wx.login()获取一个code")]),a._v(" "),t("li",[a._v("调用后端的api，发送code，后端通过这个code来校验接口，并返回一个自定义登录态")]),a._v(" "),t("li",[a._v("小程序将登录状态存入storage")]),a._v(" "),t("li",[a._v("之后再访问服务器发送业务请求就只用后端判断登录态查询openid和session_key返回业务数据")])]),a._v(" "),t("h2",{attrs:{id:"小程序优化操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小程序优化操作","aria-hidden":"true"}},[a._v("#")]),a._v(" 小程序优化操作")]),a._v(" "),t("ol",[t("li",[a._v("缩短白屏时间：\n"),t("ul",[t("li",[a._v("首屏渲染的内容较多，需要集合多份数据进行渲染：此时可以把优先级高的内容做优先展示")]),a._v(" "),t("li",[a._v("首屏内容依赖的数据从服务端请求的时间太长：分析数据返回的时间长的原因")]),a._v(" "),t("li",[a._v("一次性渲染数据太大或依赖的计算过于复杂：减少渲染的数据量、优化渲染相关数据的算法")])])]),a._v(" "),t("li",[a._v("渲染界面的耗时过长，需要校验下是否同时渲染的区域太大（例如列表过长）")]),a._v(" "),t("li",[a._v("脚本执行时间过长：需要确认并优化脚本的逻辑")]),a._v(" "),t("li",[a._v("setData调用频繁：避免无用的频繁调用，每秒调用setData的次数不超过 20 次，")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("// 不要频繁调用setData\n    this.setData({ a: 1 })\n    this.setData({ b: 2 })\n// 绝大多数时候可优化为\n    this.setData({ a: 1, b: 2 })\n")])])]),t("ol",{attrs:{start:"5"}},[t("li",[a._v("setData的数据太大，setData的数据在JSON.stringify后不超过 256KB")]),a._v(" "),t("li",[a._v("setData一个未绑定的变量")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("// 不要设置不在界面渲染时使用的数据，并将界面无关的数据放在data外\n    this.setData({\n      myData: {\n        a: '这个字符串在WXML中用到了',\n        b: '这个字符串未在WXML中用到，而且它很长…………………………'\n      }\n    })\n    // 可以优化为\n    this.setData({\n      'myData.a': '这个字符串在WXML中用到了'\n    })\n    this._myData = {\n      b: '这个字符串未在WXML中用到，而且它很长…………………………'\n    }\n\n")])])]),t("ol",{attrs:{start:"7"}},[t("li",[a._v("开启 HTTP 缓存控制")]),a._v(" "),t("li",[a._v("控制WXML节点数")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('<view data-my-data="{{myData}}"> \x3c!-- 这个 view 和下一行的 view 可以合并 --\x3e\n  <view class="my-class" data-my-data="{{myData}}" bindtap="onTap">\n    <text> \x3c!-- 这个 text 通常是没必要的 --\x3e\n      {{myText}}\n    </text>\n  </view>\n</view>\n\n\x3c!-- 可以简化为 --\x3e\n\n<view class="my-class" data-my-data="{{myData}}" bindtap="onTap">\n  {{myText}}\n</view>\n')])])]),t("ol",{attrs:{start:"9"}},[t("li",[a._v("控制图片大小，图片宽高都不超过实际显示宽高的3倍")]),a._v(" "),t("li",[a._v("合理控制网络请求数量")]),a._v(" "),t("li",[a._v("控制图片请求数")]),a._v(" "),t("li",[a._v("开启惯性滚动：wxss中带有overflow: scroll的元素，在 iOS 下需要设置-webkit-overflow-scrolling: touch样式")]),a._v(" "),t("li",[a._v("避免使用:active伪类来实现点击态")]),a._v(" "),t("li",[a._v("保持图片大小比例")]),a._v(" "),t("li",[a._v("可点击元素的宽高都不小于 20px")]),a._v(" "),t("li",[a._v("iphoneX兼容，用以下wxss进行兼容：")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("padding-bottom: constant(safe-area-inset-bottom);\npadding-bottom: env(safe-area-inset-bottom);\n")])])]),t("ol",{attrs:{start:"17"}},[t("li",[a._v("避免JS异常")]),a._v(" "),t("li",[a._v("不使用废弃接口")]),a._v(" "),t("li",[a._v("设置最低基础库版本")]),a._v(" "),t("li",[a._v("移除不可访问到的页面")]),a._v(" "),t("li",[a._v("移除大量未使用的样式")]),a._v(" "),t("li",[a._v("及时回收定时器：定时器是全局的，并不是跟页面绑定的，当小程序从一个页面路由到另一个页面之后，前一个页面定时器应注意手动回收")])])])},[],!1,null,null,null);e.default=i.exports}}]);